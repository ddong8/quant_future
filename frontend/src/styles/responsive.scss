/**
 * 响应式设计核心样式
 * 适配各种终端设备，提供最佳浏览体验
 */

// 断点定义
$breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1400px
);

// 媒体查询混入
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

@mixin respond-below($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (max-width: map-get($breakpoints, $breakpoint) - 1px) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

@mixin respond-between($min, $max) {
  @if map-has-key($breakpoints, $min) and map-has-key($breakpoints, $max) {
    @media (min-width: map-get($breakpoints, $min)) and (max-width: map-get($breakpoints, $max) - 1px) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoints: #{$min} or #{$max}";
  }
}

// 容器最大宽度
.container {
  width: 100%;
  margin: 0 auto;
  padding: 0 16px;
  
  @include respond-to(sm) {
    max-width: 540px;
    padding: 0 20px;
  }
  
  @include respond-to(md) {
    max-width: 720px;
    padding: 0 24px;
  }
  
  @include respond-to(lg) {
    max-width: 960px;
  }
  
  @include respond-to(xl) {
    max-width: 1140px;
  }
  
  @include respond-to(xxl) {
    max-width: 1320px;
  }
}

// 响应式网格系统
.row {
  display: flex;
  flex-wrap: wrap;
  margin: 0 -8px;
  
  @include respond-to(md) {
    margin: 0 -12px;
  }
}

.col {
  flex: 1;
  padding: 0 8px;
  
  @include respond-to(md) {
    padding: 0 12px;
  }
}

// 生成响应式列类
@each $breakpoint, $width in $breakpoints {
  @if $breakpoint != xs {
    @include respond-to($breakpoint) {
      @for $i from 1 through 12 {
        .col-#{$breakpoint}-#{$i} {
          flex: 0 0 percentage($i / 12);
          max-width: percentage($i / 12);
        }
      }
    }
  } @else {
    @for $i from 1 through 12 {
      .col-#{$i} {
        flex: 0 0 percentage($i / 12);
        max-width: percentage($i / 12);
      }
    }
  }
}

// 响应式显示/隐藏工具类
@each $breakpoint, $width in $breakpoints {
  @if $breakpoint != xs {
    .d-#{$breakpoint}-none {
      @include respond-to($breakpoint) {
        display: none !important;
      }
    }
    
    .d-#{$breakpoint}-block {
      @include respond-to($breakpoint) {
        display: block !important;
      }
    }
    
    .d-#{$breakpoint}-flex {
      @include respond-to($breakpoint) {
        display: flex !important;
      }
    }
    
    .d-#{$breakpoint}-inline {
      @include respond-to($breakpoint) {
        display: inline !important;
      }
    }
    
    .d-#{$breakpoint}-inline-block {
      @include respond-to($breakpoint) {
        display: inline-block !important;
      }
    }
  }
}

// 移动端优先的显示/隐藏
.d-none {
  display: none !important;
}

.d-block {
  display: block !important;
}

.d-flex {
  display: flex !important;
}

.d-inline {
  display: inline !important;
}

.d-inline-block {
  display: inline-block !important;
}

// 移动端特定样式
@include respond-below(md) {
  .mobile-hidden {
    display: none !important;
  }
  
  .mobile-full-width {
    width: 100% !important;
  }
  
  .mobile-text-center {
    text-align: center !important;
  }
  
  .mobile-no-padding {
    padding: 0 !important;
  }
  
  .mobile-small-padding {
    padding: 8px !important;
  }
  
  .mobile-no-margin {
    margin: 0 !important;
  }
  
  .mobile-small-margin {
    margin: 8px !important;
  }
}

// 桌面端特定样式
@include respond-to(lg) {
  .desktop-hidden {
    display: none !important;
  }
  
  .desktop-flex {
    display: flex !important;
  }
  
  .desktop-block {
    display: block !important;
  }
}

// 平板端特定样式
@include respond-between(md, lg) {
  .tablet-hidden {
    display: none !important;
  }
  
  .tablet-full-width {
    width: 100% !important;
  }
}

// 响应式字体大小
.text-responsive {
  font-size: 14px;
  
  @include respond-to(sm) {
    font-size: 15px;
  }
  
  @include respond-to(md) {
    font-size: 16px;
  }
  
  @include respond-to(lg) {
    font-size: 17px;
  }
  
  @include respond-to(xl) {
    font-size: 18px;
  }
}

// 响应式间距
.spacing-responsive {
  padding: 12px;
  
  @include respond-to(sm) {
    padding: 16px;
  }
  
  @include respond-to(md) {
    padding: 20px;
  }
  
  @include respond-to(lg) {
    padding: 24px;
  }
  
  @include respond-to(xl) {
    padding: 32px;
  }
}

// 响应式卡片
.card-responsive {
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  @include respond-below(md) {
    border-radius: 0;
    box-shadow: none;
    border-bottom: 1px solid var(--el-border-color-lighter);
  }
}

// 响应式表格
.table-responsive {
  @include respond-below(md) {
    .el-table {
      font-size: 12px;
      
      .el-table__header th {
        padding: 8px 4px;
      }
      
      .el-table__body td {
        padding: 8px 4px;
      }
    }
    
    // 隐藏不重要的列
    .el-table__column--hidden-xs {
      display: none;
    }
  }
  
  @include respond-below(sm) {
    // 极小屏幕下的表格优化
    .el-table {
      font-size: 11px;
      
      .el-table__header th,
      .el-table__body td {
        padding: 6px 2px;
      }
    }
  }
}

// 响应式导航
.nav-responsive {
  @include respond-below(lg) {
    .el-menu--horizontal {
      .el-menu-item {
        padding: 0 12px;
        font-size: 14px;
      }
    }
  }
  
  @include respond-below(md) {
    .el-menu--horizontal {
      .el-menu-item {
        padding: 0 8px;
        font-size: 13px;
      }
      
      .el-menu-item__title {
        display: none;
      }
    }
  }
}

// 响应式按钮
.btn-responsive {
  @include respond-below(md) {
    .el-button {
      padding: 8px 12px;
      font-size: 13px;
    }
    
    .el-button--large {
      padding: 10px 16px;
      font-size: 14px;
    }
    
    .el-button--small {
      padding: 6px 8px;
      font-size: 12px;
    }
  }
}

// 响应式表单
.form-responsive {
  @include respond-below(md) {
    .el-form-item {
      margin-bottom: 16px;
    }
    
    .el-form-item__label {
      font-size: 13px;
      line-height: 1.4;
    }
    
    .el-input__inner,
    .el-textarea__inner {
      font-size: 14px;
    }
  }
  
  @include respond-below(sm) {
    .el-form-item {
      margin-bottom: 12px;
    }
    
    .el-form-item__label {
      font-size: 12px;
    }
    
    .el-input__inner,
    .el-textarea__inner {
      font-size: 13px;
    }
  }
}

// 响应式对话框
.dialog-responsive {
  @include respond-below(md) {
    .el-dialog {
      width: 95% !important;
      margin: 20px auto !important;
    }
    
    .el-dialog__header {
      padding: 16px;
    }
    
    .el-dialog__body {
      padding: 16px;
    }
    
    .el-dialog__footer {
      padding: 12px 16px;
    }
  }
  
  @include respond-below(sm) {
    .el-dialog {
      width: 100% !important;
      margin: 0 !important;
      height: 100vh !important;
      border-radius: 0 !important;
    }
  }
}

// 响应式抽屉
.drawer-responsive {
  @include respond-below(md) {
    .el-drawer {
      width: 100% !important;
    }
  }
}

// 触摸优化
@media (hover: none) and (pointer: coarse) {
  .touch-optimized {
    // 增大触摸目标
    .el-button,
    .el-input,
    .el-select,
    .el-checkbox,
    .el-radio {
      min-height: 44px;
    }
    
    // 优化触摸反馈
    .el-button:active {
      transform: scale(0.98);
    }
    
    // 移除悬停效果
    .el-button:hover {
      transform: none;
    }
  }
}

// 高DPI屏幕优化
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .high-dpi-optimized {
    // 优化图标和图片显示
    .el-icon {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    // 优化边框显示
    .el-card,
    .el-table,
    .el-input {
      border-width: 0.5px;
    }
  }
}

// 横屏/竖屏适配
@media (orientation: landscape) and (max-height: 500px) {
  .landscape-optimized {
    // 横屏时减少垂直间距
    .page-container {
      padding: 12px;
    }
    
    .el-form-item {
      margin-bottom: 12px;
    }
    
    .el-dialog__header {
      padding: 12px 16px;
    }
  }
}

@media (orientation: portrait) {
  .portrait-optimized {
    // 竖屏时优化布局
    .el-row {
      flex-direction: column;
    }
    
    .el-col {
      width: 100%;
      margin-bottom: 16px;
    }
  }
}

// 可访问性优化
@media (prefers-reduced-motion: reduce) {
  .accessibility-optimized {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@media (prefers-contrast: high) {
  .accessibility-optimized {
    .el-button,
    .el-input,
    .el-card {
      border-width: 2px;
    }
  }
}

// 打印优化
@media print {
  .print-optimized {
    .el-button,
    .el-pagination,
    .el-drawer,
    .el-dialog {
      display: none !important;
    }
    
    .el-table {
      border: 1px solid #000;
    }
    
    .el-table th,
    .el-table td {
      border: 1px solid #000;
      padding: 4px;
    }
  }
}