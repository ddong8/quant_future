// 主题变量覆盖
:root {
  // 确保Element Plus主题变量正确应用
  --el-color-primary: #409eff;
  --el-color-primary-light-3: #79bbff;
  --el-color-primary-light-5: #a0cfff;
  --el-color-primary-light-7: #c6e2ff;
  --el-color-primary-light-8: #d9ecff;
  --el-color-primary-light-9: #ecf5ff;
  --el-color-primary-dark-2: #337ecc;
}

// 暗色主题变量
.dark {
  // 确保暗色主题变量正确应用
  --el-bg-color: #141414;
  --el-bg-color-page: #0a0a0a;
  --el-bg-color-overlay: #1d1e1f;
  --el-text-color-primary: #e5eaf3;
  --el-text-color-regular: #cfd3dc;
  --el-text-color-secondary: #a3a6ad;
  --el-text-color-placeholder: #8d9095;
  --el-text-color-disabled: #6c6e72;
  --el-border-color: #4c4d4f;
  --el-border-color-light: #414243;
  --el-border-color-lighter: #363637;
  --el-border-color-extra-light: #2b2b2c;
  --el-border-color-dark: #58585b;
  --el-border-color-darker: #636466;
  --el-fill-color: #303133;
  --el-fill-color-light: #262727;
  --el-fill-color-lighter: #1d1d1d;
  --el-fill-color-extra-light: #191919;
  --el-fill-color-dark: #39393a;
  --el-fill-color-darker: #424243;
  --el-fill-color-blank: transparent;
  --el-box-shadow: 0 12px 32px 4px rgba(0, 0, 0, 0.36), 0 8px 20px rgba(0, 0, 0, 0.72);
  --el-box-shadow-light: 0 0 12px rgba(0, 0, 0, 0.72);
  --el-box-shadow-lighter: 0 0 6px rgba(0, 0, 0, 0.72);
  --el-box-shadow-dark:
    0 16px 48px 16px rgba(0, 0, 0, 0.72), 0 12px 32px rgba(0, 0, 0, 0.72),
    0 8px 16px -8px rgba(0, 0, 0, 0.72);
  --el-overlay-color: rgba(0, 0, 0, 0.8);
  --el-overlay-color-light: rgba(0, 0, 0, 0.7);
  --el-overlay-color-lighter: rgba(0, 0, 0, 0.5);
  --el-mask-color: rgba(255, 255, 255, 0.9);
  --el-mask-color-extra-light: rgba(255, 255, 255, 0.3);
}

// 使用CSS变量控制过渡时间
:root {
  --transition-duration: 0.3s;
}

// 主题切换过渡效果
* {
  transition:
    background-color var(--transition-duration, 0.3s) ease,
    border-color var(--transition-duration, 0.3s) ease,
    color var(--transition-duration, 0.3s) ease;
}

// Element Plus组件特殊处理
.el-menu,
.el-menu-item,
.el-sub-menu__title,
.el-card,
.el-button,
.sidebar,
.sidebar-menu {
  transition:
    background-color var(--transition-duration, 0.3s) ease,
    border-color var(--transition-duration, 0.3s) ease,
    color var(--transition-duration, 0.3s) ease;
}

// 修复可能的主题问题
.el-card,
.el-dialog,
.el-drawer,
.el-popover,
.el-tooltip,
.el-dropdown-menu {
  background-color: var(--el-bg-color) !important;
  border-color: var(--el-border-color-light) !important;
  color: var(--el-text-color-primary) !important;
}

// 修复页面级别的硬编码白色背景
*[style*='background: white'],
*[style*='background: #fff'],
*[style*='background-color: white'],
*[style*='background-color: #fff'] {
  background: var(--el-bg-color) !important;
  background-color: var(--el-bg-color) !important;
}

// 强制修复所有可能的白色背景
body,
#app,
.app,
.layout,
.container {
  background-color: var(--el-bg-color-page) !important;
}

// 修复页面组件的硬编码背景 - 使用更合适的背景色
.stat-card,
.actions-card,
.filters-card,
.orders-card,
.strategies-list,
.templates-section,
.history-list,
.positions-card,
.risk-card,
.chart-card,
.analysis-metrics,
.templates-list,
.chart-container,
.quick-panel,
.preset-trading,
.market-overview,
.trading-panel,
.quick-trading,
.trading-history,
.content-placeholder,
.position-table,
.summary-card,
.position-list,
.position-filter,
.system-tabs,
.content-tabs {
  background: var(--el-bg-color) !important;
  background-color: var(--el-bg-color) !important;
  border-color: var(--el-border-color-light) !important;
}

.el-table {
  background-color: var(--el-bg-color) !important;
  color: var(--el-text-color-primary) !important;

  th {
    background-color: var(--el-fill-color-light) !important;
    color: var(--el-text-color-primary) !important;
  }

  td {
    border-color: var(--el-border-color-lighter) !important;
  }
}

.el-input {
  .el-input__inner {
    background-color: var(--el-fill-color-blank) !important;
    border-color: var(--el-border-color) !important;
    color: var(--el-text-color-primary) !important;

    &::placeholder {
      color: var(--el-text-color-placeholder) !important;
    }
  }
}

.el-select {
  .el-input__inner {
    background-color: var(--el-fill-color-blank) !important;
    border-color: var(--el-border-color) !important;
    color: var(--el-text-color-primary) !important;
  }
}

.el-button {
  &.el-button--default {
    background-color: var(--el-fill-color-blank) !important;
    border-color: var(--el-border-color) !important;
    color: var(--el-text-color-primary) !important;
  }
}

// 修复菜单主题
.el-menu {
  background-color: var(--el-bg-color) !important;
  border-color: var(--el-border-color-light) !important;

  .el-menu-item,
  .el-sub-menu__title {
    color: var(--el-text-color-primary) !important;

    &:hover {
      background-color: var(--el-color-primary-light-9) !important;
      color: var(--el-color-primary) !important;
    }

    &.is-active {
      background-color: var(--el-color-primary-light-8) !important;
      color: var(--el-color-primary) !important;
    }
  }

  .el-sub-menu .el-menu {
    background-color: transparent !important;
  }
}

// 修复页面容器和内容区域
.page-container,
.main-content,
.el-main {
  background-color: var(--el-bg-color-page) !important;
  color: var(--el-text-color-primary) !important;
}

// 修复页面头部区域
.page-header,
.page-title,
.page-description {
  background-color: var(--el-bg-color-page) !important;
  color: var(--el-text-color-primary) !important;
}

// 确保所有页面级别的容器都使用统一背景
.view-container,
.content-wrapper,
.main-wrapper {
  background-color: var(--el-bg-color-page) !important;
}

// 修复特定的白色背景，但保留卡片内容的对比度
.page-container div[style*='background: white'],
.page-container div[style*='background: #fff'],
.page-container div[style*='background-color: white'],
.page-container div[style*='background-color: #fff'],
.white-bg,
.bg-white {
  background: var(--el-bg-color) !important;
  background-color: var(--el-bg-color) !important;
}

// 修复标题文字颜色
h1,
h2,
h3,
h4,
h5,
h6,
.page-title,
.page-description {
  color: var(--el-text-color-primary) !important;
}

// 只修复特定的文字颜色，不要全局覆盖
.page-container > p,
.page-container > span,
.page-header p,
.page-header span {
  color: var(--el-text-color-regular) !important;
}

// 修复状态标签背景
.status.pending {
  background: var(--el-color-warning-light-9) !important;
  color: var(--el-color-warning) !important;
}

.template-type.limit {
  background: var(--el-color-warning-light-9) !important;
  color: var(--el-color-warning) !important;
}

.order-status.rejected {
  background: var(--el-color-warning-light-9) !important;
  color: var(--el-color-warning) !important;
}

.strategy-status.paused {
  background: var(--el-color-warning-light-9) !important;
  color: var(--el-color-warning) !important;
}

// 确保卡片内容有足够的对比度
.el-card .el-card__body,
.stat-card .card-content,
.actions-card .card-content {
  color: var(--el-text-color-primary);
}

// 确保数字和重要信息清晰可见
.number-display,
.stat-value,
.metric-value {
  color: var(--el-text-color-primary) !important;
  font-weight: 600;
}

// 确保描述文字适当的对比度
.stat-label,
.metric-label,
.card-description {
  color: var(--el-text-color-regular) !important;
}

// 强制修复所有可能导致白色背景的元素
.dark {
  // 修复所有可能的白色背景
  * {
    &[style*='background: white'],
    &[style*='background: #fff'],
    &[style*='background-color: white'],
    &[style*='background-color: #fff'] {
      background: var(--el-bg-color) !important;
      background-color: var(--el-bg-color) !important;
    }
  }

  // 修复页面级别的背景
  .page-container,
  .main-content,
  .content-area,
  .view-wrapper {
    background: var(--el-bg-color-page) !important;

    // 修复子元素的背景
    > * {
      background-color: transparent;
    }

    // 修复头部区域
    .header,
    .page-header,
    .content-header {
      background: var(--el-bg-color-page) !important;
    }
  }
}
