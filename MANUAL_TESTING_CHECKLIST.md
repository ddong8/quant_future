# 手动交易页面修复测试清单

## 测试前准备
- [ ] 确保前端和后端服务都在运行
- [ ] 打开浏览器开发者工具的控制台
- [ ] 清除浏览器缓存和本地存储

## 1. 页面加载测试
- [ ] 访问 `http://localhost:3000/trading/manual`
- [ ] 检查页面是否正常加载，无白屏
- [ ] 检查控制台是否有JavaScript错误
- [ ] 检查是否有"Cannot read properties of undefined (reading 'some')"错误

## 2. WebSocket连接测试
- [ ] 检查页面右上角是否显示WebSocket连接状态
- [ ] 状态应该显示为"已连接"、"连接中"或"连接失败"
- [ ] 如果显示"连接失败"，点击重连按钮测试重连功能
- [ ] 检查控制台是否有"WebSocket未连接，无法发送消息"错误

## 3. API请求测试
- [ ] 点击"刷新"按钮
- [ ] 检查是否显示加载状态
- [ ] 检查控制台是否有网络错误
- [ ] 如果有网络错误，检查是否显示用户友好的错误提示

## 4. 组件渲染测试
- [ ] 检查手动交易表单是否正常显示
- [ ] 检查市场行情组件是否正常显示
- [ ] 检查持仓显示组件是否正常显示
- [ ] 检查订单管理组件是否正常显示
- [ ] 所有组件都应该有默认数据或空状态显示

## 5. 错误处理测试
- [ ] 断开网络连接，刷新页面
- [ ] 检查是否显示网络错误提示
- [ ] 检查是否有重试按钮
- [ ] 恢复网络连接，点击重试按钮
- [ ] 检查数据是否重新加载

## 6. 数据验证测试
- [ ] 检查所有数组数据是否有默认值（空数组）
- [ ] 检查所有数值数据是否有默认值（0或合理默认值）
- [ ] 检查所有字符串数据是否有默认值（空字符串或占位符）

## 7. 用户体验测试
- [ ] 错误提示是否用户友好（非技术性语言）
- [ ] 加载状态是否清晰可见
- [ ] 重试功能是否易于发现和使用
- [ ] 页面响应是否流畅

## 8. 边界情况测试
- [ ] 在网络不稳定的情况下使用页面
- [ ] 长时间保持页面打开，测试WebSocket重连
- [ ] 快速点击刷新按钮，测试并发请求处理
- [ ] 在移动设备上测试响应式布局

## 预期结果
✅ **成功标准:**
- 无JavaScript控制台错误
- 无"Cannot read properties of undefined"错误
- WebSocket连接状态正确显示
- API请求失败时显示友好错误提示
- 所有组件正常渲染，有合理的默认值
- 重试和重连功能正常工作

❌ **失败标准:**
- 出现JavaScript错误导致页面崩溃
- WebSocket连接问题导致功能不可用
- API请求失败时显示技术性错误信息
- 组件因数据问题无法渲染

## 测试记录
测试日期: ___________
测试人员: ___________

| 测试项目 | 状态 | 备注 |
|---------|------|------|
| 页面加载 | ⬜ | |
| WebSocket连接 | ⬜ | |
| API请求 | ⬜ | |
| 组件渲染 | ⬜ | |
| 错误处理 | ⬜ | |
| 数据验证 | ⬜ | |
| 用户体验 | ⬜ | |
| 边界情况 | ⬜ | |

## 问题记录
如果发现问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期行为
4. 实际行为
5. 控制台错误信息（如有）